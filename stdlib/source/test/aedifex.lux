(.module:
  [lux #*
   [program (#+ program:)]
   ["_" test (#+ Test)]
   [control
    [io (#+ io)]]]
  ["." / #_
   ["#." artifact]
   ["#." cli]
   ["#." command]
   ["#." dependency
    ["#/." resolution]
    ["#/." status]]
   ["#." hash]
   ["#." input]
   ["#." local]
   ["#." metadata]
   ["#." package]
   ["#." profile]
   ["#." project]
   ## ["#." parser]
   ## ["#." pom]
   ## ["#." repository]
   ## ["#." runtime]
   ])

(def: dependency
  Test
  ($_ _.and
      /dependency.test
      /dependency/resolution.test
      /dependency/status.test
      ))

(def: test
  Test
  ($_ _.and
      /artifact.test
      /cli.test
      /command.test
      ..dependency
      /hash.test
      /input.test
      /local.test
      /metadata.test
      /package.test
      /profile.test
      /project.test
      
      ## /parser.test
      ## /pom.test
      ## /repository.test
      ## /runtime.test
      ))

(program: args
  (<| io
      _.run!
      (_.times 100)
      ..test))
