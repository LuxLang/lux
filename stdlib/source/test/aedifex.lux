(.module:
  [lux #*
   [program (#+ program:)]
   ["_" test (#+ Test)]
   [control
    [io (#+ io)]]]
  ["." / #_
   ["#." artifact]
   ["#." cli]
   ["#." command]
   ## ["#." input]
   ## ["#." local]
   ## ["#." dependency
   ##  ## ["#/." resolution]
   ##  ["#/." status]]
   ## ["#." package]
   ## ["#." profile]
   ## ["#." project]
   ## ["#." hash]
   ## ["#." parser]
   ## ["#." pom]
   ## ["#." repository]
   ## ["#." runtime]
   ## ["#." metadata]
   ])

(def: test
  Test
  ($_ _.and
      /artifact.test
      /cli.test
      /command.test
      ## /input.test
      ## /local.test
      ## /dependency.test
      ## ## /dependency/resolution.test
      ## /dependency/status.test
      ## /package.test
      ## /profile.test
      ## /project.test
      ## /hash.test
      ## /parser.test
      ## /pom.test
      ## /repository.test
      ## /runtime.test
      ## /metadata.test
      ))

(program: args
  (<| io
      _.run!
      (_.times 100)
      ..test))
