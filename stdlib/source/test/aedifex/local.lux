(.module:
  [library
   [lux "*"
    ["_" test {"+" [Test]}]
    [abstract
     [monad {"+" [do]}]]
    [data
     ["[0]" text]]
    [math
     ["[0]" random {"+" [Random]}]]]]
  [//
   ["@[0]" artifact]]
  [\\program
   ["[0]" /
    ["/[1]" // "_"
     ["[1][0]" artifact]]]])

(def: .public test
  Test
  (<| (_.covering /._)
      (do [! random.monad]
        [sample @artifact.random]
        ($_ _.and
            (_.cover [/.repository /.uri]
                     (text.starts_with? /.repository
                                        (/.uri (value@ //artifact.#version sample) sample)))
            ))))
