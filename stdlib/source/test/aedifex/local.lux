(.module:
  [lux #*
   ["_" test (#+ Test)]
   [abstract
    [monad (#+ do)]]
   [data
    ["." text]]
   [math
    ["." random (#+ Random)]]]
  [//
   ["@." artifact]]
  {#program
   ["." /]})

(def: #export test
  Test
  (<| (_.covering /._)
      (do {! random.monad}
        [sample @artifact.random]
        ($_ _.and
            (_.cover [/.repository /.uri]
                     (text.starts_with? /.repository
                                        (/.uri sample)))
            ))))
