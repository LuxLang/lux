(.module:
  [library
   [lux {"-" [Type type]}
    [data
     [collection
      ["[0]" list]]]
    [target
     [jvm
      ["[0]" method {"+" [Method]}]
      ["_" bytecode {"+" [Label Bytecode]}]
      [constant
       [pool {"+" [Resource]}]]
      ["[0]" type {"+" [Type]}
       ["[0]" category]]]]]]
  ["[0]" //
   ["//[1]" /// "_"
    ["[1][0]" type]
    [//////
     [arity {"+" [Arity]}]]]])

(def: .public name "impl")

(def: .public (type arity)
  (-> Arity (Type category.Method))
  (type.method [(list.repeated arity ////type.value)
                ////type.value
                (list)]))

(def: .public (method' name arity @begin body)
  (-> Text Arity Label (Bytecode Any) (Resource Method))
  (method.method //.modifier name
                 (..type arity)
                 (list)
                 {.#Some ($_ _.composite
                             (_.set_label @begin)
                             body
                             _.areturn
                             )}))

(def: .public method
  (-> Arity Label (Bytecode Any) (Resource Method))
  (method' ..name))
