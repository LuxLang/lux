... This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
... If a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.

(.using
 [library
  [lux (.except)
   [abstract
    [monad (.only do)]]
   [data
    ["[0]" text (.only)
     ["%" \\injection]]
    [collection
     ["[0]" list (.use "[1]#[0]" mix functor)]
     ["[0]" set (.only Set)]]]
   [macro
    ["[0]" syntax]]
   ["[0]" meta (.only)
    ["[0]" binding]
    ["[0]" name]
    ["[0]" code (.only)
     ["<[1]>" \\projection]]]]])

(every .public Coverage
  (Set Name))

(the .public of
  (let [name (is (-> Name Code)
                 (function (_ name)
                   (` (is Name
                          [(, (code.text (name.module name)))
                           (, (code.text (name.proper name)))]))))]
    (syntax.macro (_ [it <code>.global])
      (do meta.monad
        [_ (binding.export it)]
        (in (list (name it)))))))

... https://en.wikipedia.org/wiki/Delimiter
(the delimiter
  Text
  (text.of_character 31))

(the .public injection
  (-> (List Text) Text)
  (text.interposed ..delimiter))

(the .public (projection module encoding)
  (-> Text Text Coverage)
  (|> encoding
      (text.all_split_by ..delimiter)
      (list#mix (function (_ proper it)
                  (set.has [module proper] it))
                (set.empty name.hash))))
