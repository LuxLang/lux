(.require
 [library
  [lux (.except)
   [abstract
    [equivalence (.only Equivalence)]
    [hash (.only Hash)]]
   [data
    ["[0]" text (.use "[1]#[0]" hash)]]
   [meta
    [type
     ["[0]" primitive (.only primitive)]]]]])

(primitive .public Version
  Text

  (def .public equivalence
    (Equivalence Version)
    (implementation
     (def (= reference it)
       (text#= (primitive.representation reference)
               (primitive.representation it)))))

  (def .public hash
    (Hash Version)
    (implementation
     (def equivalence ..equivalence)
     (def hash (|>> primitive.representation text#hash))))

  (with_template [<name> <version>]
    [(def .public <name>
       Version
       (primitive.abstraction <version>))]

    [v0_9 "0.9"]
    [v1_0 "1.0"]
    [v1_1 "1.1"]
    [v2_0 "2.0"]
    )
  )
