(.module:
  [library
   [lux "*"
    [control
     ["[0]" try {"+" Try}]
     [security
      ["!" capability {"+" capability:}]]]
    [time
     ["[0]" instant {"+" Instant}]]]])

(type: .public ID Nat)

(type: .public Time
  (Record
   [#created Instant
    #updated Instant]))

(capability: .public (Can_Create ! entity)
  (can_create [Instant entity] (! (Try ID))))

(capability: .public (Can_Retrieve ! entity)
  (can_retrieve ID (! (Try [Time entity]))))

(capability: .public (Can_Update ! entity)
  (can_update [ID Instant entity] (! (Try Any))))

(capability: .public (Can_Delete ! entity)
  (can_delete ID (! (Try Any))))

(type: .public (CRUD ! entity)
  (Record
   [#can_create (Can_Create ! entity)
    #can_retrieve (Can_Retrieve ! entity)
    #can_update (Can_Update ! entity)
    #can_delete (Can_Delete ! entity)]))
