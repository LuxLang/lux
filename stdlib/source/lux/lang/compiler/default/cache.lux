(.module:
  lux
  (lux (data (format [binary #+ Binary]))))

(def: definition
  (Binary Definition)
  ($_ binary.seq binary.type binary.code binary.any))

(def: alias
  (Binary [Text Text])
  (binary.seq binary.text binary.text))

## TODO: Remove #module-hash, #imports & #module-state ASAP.
## TODO: Not just from this parser, but from the lux.Module type.
(def: #export module
  (Binary Module)
  ($_ binary.seq
      ## #module-hash
      (binary.ignore +0)
      ## #module-aliases
      (binary.list ..alias)
      ## #definitions
      (binary.list (binary.seq binary.text ..definition))
      ## #imports
      (binary.list binary.text)
      ## #tags
      (binary.ignore (list))
      ## #types
      (binary.ignore (list))
      ## #module-annotations
      (binary.maybe binary.code)
      ## #module-state
      (binary.ignore #.Cached)))
