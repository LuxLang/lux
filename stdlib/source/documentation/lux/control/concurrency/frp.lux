(.module:
  [library
   [lux (#- if loop)
    ["$" documentation (#+ documentation:)]
    [data
     [text (#+ \n)
      ["%" format (#+ format)]]]
    [macro
     ["." template]]]]
  [\\library
   ["." /]])

(documentation: /.Channel
  "An asynchronous channel to distribute values.")

(documentation: /.Sink
  "The tail-end of a channel, which can be written-to to fee the channel.")

(documentation: /.channel
  "Creates a brand-new channel and hands it over, along with the sink to write to it."
  [(channel _)])

(documentation: /.Subscriber
  "A function that can receive every value fed into a channel.")

(documentation: /.only
  (format "Produces a new channel based on the old one, only with values"
          \n "that pass the test.")
  [(only pass? channel)])

(documentation: /.of_async
  "A one-element channel containing the output from an async."
  [(of_async async)])

(documentation: /.fold
  "Asynchronous fold over channels."
  [(fold f init channel)])

(documentation: /.sequential
  "Transforms the given list into a channel with the same elements."
  [(sequential milli_seconds values)])

(.def: .public documentation
  (.List $.Module)
  ($.module /._
            ""
            [..Channel
             ..Sink
             ..channel
             ..Subscriber
             ..only
             ..of_async
             ..fold
             ..sequential
             ($.default /.channel_is_already_closed)
             ($.default /.functor)
             ($.default /.apply)
             ($.default /.monad)
             ($.default /.subscribe!)
             ($.default /.folds)
             ($.default /.poll)
             ($.default /.periodic)
             ($.default /.iterations)
             ($.default /.distinct)
             ($.default /.list)]
            []))
