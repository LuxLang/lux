(.module:
  [library
   [lux {"-" [nat int rev]}
    ["$" documentation {"+" [documentation:]}]
    [data
     ["." text {"+" [\n]}
      ["%" format {"+" [format]}]]]
    [macro
     ["." template]]]]
  [\\library
   ["." /]])

(template [<name>]
  [(documentation: <name>
     ""
     [(<name> tag ann)])]

  [/.value]
  [/.bit]
  [/.nat]
  [/.int]
  [/.rev]
  [/.frac]
  [/.text]
  [/.identifier]
  [/.tag]
  [/.form]
  [/.tuple]
  [/.record]
  )

(.def: .public documentation
  (.List $.Module)
  ($.module /._
            "Machinary for querying annotations on modules and definitions."
            [..value
             ..bit
             ..nat
             ..int
             ..rev
             ..frac
             ..text
             ..identifier
             ..tag
             ..form
             ..tuple
             ..record
             ($.default /.Annotation)
             ($.default /.flagged?)
             ($.default /.implementation?)]
            []))
