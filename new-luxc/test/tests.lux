(.module:
  lux
  (lux (control monad)
       [io]
       (concurrency [promise])
       [cli #+ program:]
       [test])
  (test (luxc (lang (analysis ["_.A" primitive]
                              ["_.A" structure]
                              ["_.A" reference]
                              ["_.A" case]
                              ["_.A" function]
                              ["_.A" type]
                              (procedure ["_.A" common]
                                         ["_.A" host]))
                    (synthesis ["_.S" primitive]
                               ["_.S" structure]
                               (case ["_.S" special])
                               ["_.S" function]
                               ["_.S" procedure]
                               ["_.S" loop])
                    (translation (jvm ["_.T_jvm" primitive]
                                      ["_.T_jvm" structure]
                                      ["_.T_jvm" case]
                                      ["_.T_jvm" function]
                                      ["_.T_jvm" reference]
                                      (procedure ["_.T_jvm" common]
                                                 ["_.T_jvm" host]))
                                 (js ["_.T_js" primitive]
                                     ["_.T_js" structure]
                                     ["_.T_js" case]
                                     ["_.T_js" function]
                                     ["_.T_js" reference]
                                     ## (procedure ["_.T_js" common]
                                     ##            ["_.T_js" host])
                                     )))
              )))

(program: args
  (test.run))
