(;module:
  lux
  (lux (control pipe)
       ["r" math/random "r/" Monad<Random>]
       (data ["R" error])
       [meta]
       (meta [code])
       [io])
  (luxc ["&" base]
        [analyser]
        ["&;" host]))

(def: init-info
  Info
  {#;target  "JVM"
   #;version &;version
   #;mode    #;Build})

(def: init-type-context
  Type-Context
  {#;ex-counter +0
   #;var-counter +0
   #;var-bindings (list)})

(def: #export (init-compiler _)
  (-> Top Compiler)
  {#;info            init-info
   #;source          [dummy-cursor +0 ""]
   #;cursor          dummy-cursor
   #;modules         (list)
   #;scopes          (list)
   #;type-context    init-type-context
   #;expected        #;None
   #;seed            +0
   #;scope-type-vars (list)
   #;host            (:! Void (io;run &host;init-host))})
